!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t=n();for(var o in t)("object"==typeof exports?exports:e)[o]=t[o]}}("undefined"!=typeof self?self:this,function(){return webpackJsonp([1],{7:function(e,n,t){"use strict";t(0),t(1),t(8),AV.init({appId:"dkIJBHfaV9puzkRqVipWFH8s-gzGzoHsz",appKey:"JVq509599HnbKRiUNthOnDMM"}),$(function(){function e(e){var n=($(".coverimg").attr("src",e),"\n    <style>\n    .page::before {\n      background: transparent url("+e+")no-repeat center;\n      background-size:cover;\n    }\n    </style>");$("head").append(n)}function n(e){u.src=e,u.oncanplay=function(){u.pause(),$(".iconstop").on("click",t),$(".iconplay").on("click",o)}}function t(){u.duration<=u.currentTime?(console.log("stop2"),$(".iconstop").removeClass("active"),$(".iconplay").addClass("active"),$(".circle").removeClass("playing"),$(".stylus").removeClass("playing"),u.currentTime=0):(console.log("stop"),$(".iconstop").removeClass("active"),$(".iconplay").addClass("active"),u.pause(),$(".circle").removeClass("playing"),$(".stylus").removeClass("playing"))}function o(){console.log("play"),$(".iconplay").removeClass("active"),$(".iconstop").addClass("active"),u.play(),$(".circle").addClass("playing"),$(".stylus").addClass("playing")}function i(){s(),setInterval(function(){var e=u.currentTime;l(e),$.map(d,function(n,t){void 0!==d[t+1]&&n.time<=e&&d[t+1].time>e&&r(t)})},400)}function a(e,n,t,o){var i=e.split("\n");$(".songlyric>h1").text(n+"-"+t),i.forEach(function(e,n){var t=e.split("]"),o=t[0].substring(1),i=o.split(":");d.push({time:Number(60*i[0])+Number(i[1]),lyric:t[1]})})}function r(e){var n=$(".lyricTransform>p").eq(e).offset().top,t=$(".lyricTransform>p").height();c(e,"-"+(n-$(".lyricTransform").offset().top-t)+"px")}function s(){d.map(function(e,n){var t=$("<p></p>");t.attr("data-time",e.time).text(e.lyric),$(".lyricTransform").append(t)})}function c(e,n){if(e===d.length-1)return void $(".lyricTransform>p").eq(d.lenght-1).addClass("active").siblings().removeClass("active");$(".lyricTransform>p").eq(e).addClass("active").siblings().removeClass("active"),$(".lyricTransform").css("transform","translateY("+n+")")}function l(e){e>=u.duration&&!0===m?(m=!1,$(".iconstop").click()):m=!0}var p=function(e,n){n||(n=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),o=t.exec(n);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}("id"),f=new AV.Query("Song"),u=document.createElement("audio"),d=[],m=!0;!function(t,o){o.get(t).then(function(t){var o=t.attributes,r=o.url,s=o.lyric,c=o.name,l=o.singer,p=o.cover;n(r),a(s,c,l,p),e(p),i()})}(p,f)})},8:function(e,n){}},[7])});
//# sourceMappingURL=song.bundle.dc966370db9563b19875.js.map